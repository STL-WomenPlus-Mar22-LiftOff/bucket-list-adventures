@using Highsoft.Web.Mvc.Charts
@using Highsoft.Web.Mvc.Charts.Rendering
@using static BucketListAdventures.Models.ClimateNormals
@model IEnumerable<MonthlyData>

<script src="https://code.highcharts.com/highcharts.js"></script>

<script type="text/javascript">
window.onload = function () {
    Highcharts highcharts = new Highcharts
    {
        Title = new Title
        {
            Text = "Monthly Average Temperature",
            X = -20
        },
        XAxis = new List
        {
            new XAxis
            {
                Categories = new List { "Jan", "Feb", "Mar", "Apr", "May", "Jun",
                        "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" },
            }
        },
        YAxis = new List
        {
            new YAxis
            {
                Title = new YAxisTitle
                {
                    Text = "Temperature (°C)"
                },
            }
        },
        Tooltip = new Tooltip
        {
            ValueSuffix = "°F"
        },
        Legend = new Legend
        {
            Layout = LegendLayout.Vertical,
            Align = LegendAlign.Right,
            VerticalAlign = LegendVerticalAlign.Middle,
            BorderWidth = 0
        },
        Series = new List
        {
            new LineSeries
            {
                Name = "min",
                Data = @Model.Select(month => month.MLY_TMIN_NORMAL).ToList()
            },
            new LineSeries
            {
                Name = "max",
                Data = @Model.Select(month => month.MLY_TMAX_NORMAL).ToList()
            },
            new LineSeries
            {
                Name = "avg",
                Data = @Model.Select(month => month.MLY_TAVG_NORMAL).ToList()
            },
        }
    }
    var renderer = new HighchartsRenderer(highcharts);
    renderer.RenderHtml()
};
</script>